---
// Progress Indicator Component for multi-step processes
interface Props {
  steps: Array<{ label: string; completed?: boolean; active?: boolean }>;
  currentStep?: number;
}

const { steps, currentStep } = Astro.props;
---

<div class="progress-indicator" role="progressbar" aria-valuenow={currentStep || 0} aria-valuemin="0" aria-valuemax={steps.length - 1}>
  <div class="flex items-center justify-between mb-4">
    {steps.map((step, index) => {
      const isActive = currentStep !== undefined ? index === currentStep : step.active;
      const isCompleted = step.completed || (currentStep !== undefined && index < currentStep);
      const stepNumber = index + 1;
      
      return (
        <div class="flex-1 flex items-center" key={index}>
          <div class="flex flex-col items-center flex-1">
            <!-- Step Circle -->
            <div
              class={`w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-all duration-300 ${
                isCompleted
                  ? 'bg-blue-600 text-white'
                  : isActive
                  ? 'bg-blue-600 text-white ring-4 ring-blue-200'
                  : 'bg-gray-200 text-gray-600'
              }`}
            >
              {isCompleted ? (
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
              ) : (
                <span>{stepNumber}</span>
              )}
            </div>
            <!-- Step Label -->
            <div
              class={`mt-2 text-sm font-medium text-center ${
                isActive ? 'text-blue-600' : isCompleted ? 'text-gray-700' : 'text-gray-500'
              }`}
            >
              {step.label}
            </div>
          </div>
          <!-- Connector Line -->
          {index < steps.length - 1 && (
            <div
              class={`flex-1 h-0.5 mx-2 transition-all duration-300 ${
                isCompleted ? 'bg-blue-600' : 'bg-gray-200'
              }`}
            ></div>
          )}
        </div>
      );
    })}
  </div>
</div>

<style>
  .progress-indicator {
    width: 100%;
  }
  
  @media (max-width: 640px) {
    .progress-indicator .text-sm {
      font-size: 0.75rem;
    }
    
    .progress-indicator .w-10 {
      width: 2rem;
      height: 2rem;
    }
  }
</style>

