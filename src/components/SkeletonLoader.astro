---
// Skeleton Loader Component for loading states
interface Props {
  variant?: 'text' | 'card' | 'image' | 'avatar' | 'list';
  lines?: number;
  width?: string;
  height?: string;
  className?: string;
}

const { variant = 'text', lines = 3, width, height, className = '' } = Astro.props;
---

{variant === 'text' && (
  <div class={`skeleton-text ${className}`}>
    {Array.from({ length: lines }).map((_, i) => (
      <div
        class="skeleton-line"
        style={i === lines - 1 ? `width: ${width || '60%'}` : undefined}
      ></div>
    ))}
  </div>
)}

{variant === 'card' && (
  <div class={`skeleton-card ${className}`}>
    <div class="skeleton-image" style={height ? `height: ${height}` : undefined}></div>
    <div class="skeleton-content">
      <div class="skeleton-line skeleton-title"></div>
      <div class="skeleton-line"></div>
      <div class="skeleton-line" style="width: 80%"></div>
    </div>
  </div>
)}

{variant === 'image' && (
  <div
    class={`skeleton-image ${className}`}
    style={width && height ? `width: ${width}; height: ${height}` : undefined}
  ></div>
)}

{variant === 'avatar' && (
  <div
    class={`skeleton-avatar ${className}`}
    style={width && height ? `width: ${width}; height: ${height}` : undefined}
  ></div>
)}

{variant === 'list' && (
  <div class={`skeleton-list ${className}`}>
    {Array.from({ length: lines }).map(() => (
      <div class="skeleton-list-item">
        <div class="skeleton-avatar"></div>
        <div class="skeleton-list-content">
          <div class="skeleton-line"></div>
          <div class="skeleton-line" style="width: 70%"></div>
        </div>
      </div>
    ))}
  </div>
)}

<style>
  /* Skeleton Animation */
  @keyframes skeleton-loading {
    0% {
      background-position: -200px 0;
    }
    100% {
      background-position: calc(200px + 100%) 0;
    }
  }

  .skeleton-line,
  .skeleton-image,
  .skeleton-avatar,
  .skeleton-title {
    background: linear-gradient(
      90deg,
      #f0f0f0 0px,
      #f8f8f8 40px,
      #f0f0f0 80px
    );
    background-size: 200px 100%;
    animation: skeleton-loading 1.5s ease-in-out infinite;
    border-radius: 4px;
  }

  .skeleton-text {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .skeleton-line {
    height: 1rem;
    width: 100%;
  }

  .skeleton-title {
    height: 1.5rem;
    width: 60%;
    margin-bottom: 0.5rem;
  }

  .skeleton-card {
    background: white;
    border-radius: 0.5rem;
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }

  .skeleton-image {
    width: 100%;
    height: 200px;
    background: #f0f0f0;
  }

  .skeleton-content {
    padding: 1rem;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .skeleton-avatar {
    width: 3rem;
    height: 3rem;
    border-radius: 50%;
    background: #f0f0f0;
  }

  .skeleton-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .skeleton-list-item {
    display: flex;
    gap: 1rem;
    align-items: center;
  }

  .skeleton-list-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  /* Dark mode support */
  @media (prefers-color-scheme: dark) {
    .skeleton-line,
    .skeleton-image,
    .skeleton-avatar,
    .skeleton-title {
      background: linear-gradient(
        90deg,
        #2a2a2a 0px,
        #333333 40px,
        #2a2a2a 80px
      );
      background-size: 200px 100%;
    }

    .skeleton-card {
      background: #1a1a1a;
    }
  }
</style>


